webpackJsonp([0],{"0xS9":function(t,e,n){n("7q9M")("observable")},"26i/":function(t,e){},"2LoE":function(t,e,n){t.exports={default:n("2jG+"),__esModule:!0}},"2jG+":function(t,e,n){n("rYUz"),n("MKOc"),t.exports=n("RsVo").f("iterator")},"3cXf":function(t,e,n){t.exports={default:n("NUnD"),__esModule:!0}},"5o7s":function(t,e,n){"use strict";var i={props:{preventMaskClose:{type:Boolean,default:!1},opacity:{type:Number,default:.7},zIndex:{type:Number,default:4e3},top:{type:Number,default:50}},name:"Modal",methods:{maskClose:function(){this.preventMaskClose||this.close()},close:function(){this.$emit("close")}}},r={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"modal"},[e("div",{staticClass:"modal__mask",style:{background:"rgba(0, 0, 0, "+this.opacity+")","z-index":this.zIndex},on:{click:this.maskClose}}),this._v(" "),e("div",{staticClass:"modal__container",style:{"z-index":this.zIndex,top:this.top+"%"}},[this._t("default")],2)])},staticRenderFns:[]};var a=n("C7Lr")(i,r,!1,function(t){n("FPXL")},"data-v-46bafd99",null);e.a=a.exports},"7q9M":function(t,e,n){var i=n("Dmm0"),r=n("/KQr"),a=n("4I+n"),o=n("RsVo"),s=n("0hE2").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:o.f(t)})}},"9X8G":function(t,e){},AS5F:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("a3Yh"),r=n.n(i),a=n("rVsN"),o=n.n(a),s=n("3cXf"),c=n.n(s),u=n("4YfN"),l=n.n(u),f=n("R4Sj"),d=n("0xDb"),h={props:{data:{type:Object,required:!0}},data:function(){return{}},computed:{star:function(){return Object(d.a)(this.data.age)}},mounted:function(){},methods:{}},p={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"user-cell user-cell_link"},[n("div",{staticClass:"user-cell__avatar"},[n("img",{staticClass:"avatar",attrs:{src:t.data.headimgurl}})]),t._v(" "),n("div",{staticClass:"weui-cell__bd"},[n("div",{staticClass:"user-cell__info"},[n("p",{staticClass:"name"},[t._v(t._s(t.data.nickname))]),t._v(" "),1==t.data.sex?n("img",{staticClass:"icon-sex",attrs:{src:"https://oss.pocketuniversity.cn/media/2018-10-15/5bc48b6078ad0.png"}}):2==t.data.sex?n("img",{staticClass:"icon-sex icon-sex-girl",attrs:{src:"https://oss.pocketuniversity.cn/media/2018-10-15/5bc48b6078571.png"}}):t._e(),t._v(" "),n("span",{staticClass:"g-tip star"},[t._v("\n                "+t._s(t.star)+"\n            ")])]),t._v(" "),n("p",{staticClass:"g-tip base__item",staticStyle:{"font-size":"12px"}},[n("span",[t._v(t._s(t.data.address))]),t._v(" "),t.data.address&&t.data.school?n("span",[t._v("|")]):t._e(),t._v(" "),n("span",[t._v(t._s(t.data.school))])])]),t._v(" "),n("div",{staticClass:"weui-cell__ft",staticStyle:{"font-size":"12px","padding-right":"16px"}},[t._t("footer-text")],2)])},staticRenderFns:[]};var g=n("C7Lr")(h,p,!1,function(t){n("Nvzs")},"data-v-7ce18ad0",null).exports,v={props:{active:Boolean},data:function(){return{}}},m={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"u-tag",class:{"u-tag_active":this.active}},[this._t("default")],2)},staticRenderFns:[]};var y=n("C7Lr")(v,m,!1,function(t){n("GNRM")},"data-v-5731bdfb",null).exports,w=n("DjFK"),b=n("5o7s"),_=n("z2yV"),x=n("l4Be"),S=(n("vzB3"),{name:"PhotoPreview",data:function(){return{imgHeight:0,imgWidth:0,wrapperHeight:0,showToggleBtn:!1,isShowAll:!1,notRealFace:!1}},props:{url:{type:String,required:!0}},computed:{wrapperHeightCal:function(){return this.wrapperHeight?this.wrapperHeight+"px":"auto"}},created:function(){},methods:{imgLoaded:function(){this.$refs.wrapper;var t=this.$refs.img;this.imgWidth=t.offsetWidth,this.imgHeight=t.offsetHeight,this.imgHeight>this.imgWidth?(this.wrapperHeight=this.imgWidth,this.showToggleBtn=!0):this.wrapperHeight=this.imgHeight},toggleShow:function(){this.isShowAll=!this.isShowAll,this.isShowAll?this.wrapperHeight=this.imgHeight:this.wrapperHeight=this.imgWidth},fetchMyCardInfo:function(){var t=this;queryPartnerInfo({id:this.baseInfo.partner_id}).then(function(e){t.myCardInfo=e.data})},handleUploadInputChange:function(t){var e=this,n=t.target.files[0];if(n)if(n.size/1024>7e3)weui.alert("图片过大，请重新选择");else{var i=weui.loading("图片加载中...");lrz(n,{width:1280}).then(function(t){Object(x.b)(t.base64).then(function(t){i.hide();var n=t.errmsg.imgs[0];e.$emit("ok",{status:0,data:{imgUrl:n}})}).catch(function(t){console.error(t),e.$emit("error")})})}else weui.alert("未选择图片")}},components:{XAliicon:_.a}}),C={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"wrapper",staticClass:"photo-view"},[t.url?n("div",{staticClass:"image-wrapper"},[n("div",{staticClass:"position",staticStyle:{width:"100%",height:"400px"},style:{background:"url("+t.url+")"}}),t._v(" "),n("div",{staticClass:"tip change-tip"},[t._v("\n            点此重新上传\n        ")])]):[n("div",{staticClass:"placeholder"},[n("div",{staticClass:"avatar"},[n("x-aliicon",{attrs:{type:"hao",color:"#fff",size:"40"}})],1),t._v(" "),n("div",{staticClass:"camera"},[n("x-aliicon",{attrs:{type:"xiangji",color:"#fff",size:"16"}})],1)]),t._v(" "),t._m(0)],t._v(" "),n("input",{staticClass:"photo-input",attrs:{type:"file",accept:"image/*"},on:{change:t.handleUploadInputChange}})],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip"},[this._v("\n            上传一张照片，最好能露个脸"),e("span",{staticClass:"optional"},[this._v(" (选填)")])])}]};var I=n("C7Lr")(S,C,!1,function(t){n("26i/")},"data-v-9a3ee8c4",null).exports,k={props:{title:String,subtitle:String}},P={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form i-class"},[n("div",{staticClass:"title-wrapper"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"subtitle"},[t._v("\n            "+t._s(t.subtitle)+"\n        ")])]),t._v(" "),n("div",{staticClass:"body"},[t._t("default")],2)])},staticRenderFns:[]};var O=n("C7Lr")(k,P,!1,function(t){n("l4kD")},"data-v-f59cc520",null).exports,F={props:{title:String}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"form-item i-class"},[e("div",{staticClass:"title"},[this._v("\n        "+this._s(this.title)+"\n        "),this._t("title")],2),this._v(" "),e("div",{staticClass:"body"},[this._t("default")],2)])},staticRenderFns:[]};var T=n("C7Lr")(F,D,!1,function(t){n("aAP0")},"data-v-a9bdae2e",null).exports,U={0:"chat",1:"72h"},j={"72h":{title:"恋爱体验契约",paragraphs:["1.双方应本着契约精神遵守活动规则。","2.契约经双方确认生效后，双方需要在未来一天内走心的陪对方聊天，及时回复对方信息并于24h小时后互相评价，记录永久档案","3.契约签订将生成契约编号，契约详情对双方可见。契约将永久跟随此账号，不可撤销。"]},chat:{title:"交换微信契约",paragraphs:["1.双方应本着契约精神遵守活动规则。","2.契约经双方确认生效后，双方需要在未来一天内走心的陪对方聊天，及时回复对方信息并于24h小时后互相评价，记录永久档案","3.契约签订将生成契约编号，契约详情对双方可见。契约将永久跟随此账号，不可撤销。"]}},A=null,q={props:{type:null,confirmText:{type:String,value:"点此继续"}},data:function(){return{signing:!1,prevSignUrl:"",signUrl:"",title:"",paragraphs:[],dirty:!1,context:null,startX:0,startY:0,canvasLeft:0,canvasTop:0,visible:{prevSign:!1},hidding:!1}},computed:l()({},Object(f.d)("user",["userInfo"])),mounted:function(){var t=j[U[this.type]];this.title=t.title,this.paragraphs=t.paragraphs,this.prevSignUrl=this.userInfo.sign},methods:l()({},Object(f.b)("user",["updateUserInfo"]),{setData:function(t){for(var e in t)this[e]=t[e]},handleShowSignCanvas:function(){var t=this;this.setStartSignStatus(),setTimeout(function(){t.initCanvas()},200)},setStartSignStatus:function(){this.setData({signing:!0})},setFinishSignStatus:function(){this.setData({signing:!1})},initCanvas:function(){(A=document.getElementById("sign")).width=2*A.clientWidth,A.height=2*A.clientHeight,this.context=A.getContext("2d"),this.context.lineWidth=3,this.context.strokeStyle="#333333",this.context.lineCap="round"},handleSignStart:function(t){t.preventDefault(),t.stopPropagation();var e=A.getBoundingClientRect();this.canvasLeft=e.left,this.canvasTop=e.top,this.startX=t.changedTouches[0].clientX-this.canvasLeft,this.startY=t.changedTouches[0].clientY-this.canvasTop,this.startX=2*this.startX,this.startY=2*this.startY,this.context.beginPath(),this.setData({dirty:!0})},handleSignMove:function(t){t.preventDefault(),t.stopPropagation(),this.context.moveTo(this.startX,this.startY),this.startX=t.changedTouches[0].clientX-this.canvasLeft,this.startY=t.changedTouches[0].clientY-this.canvasTop,this.startX=2*this.startX,this.startY=2*this.startY,this.context.lineTo(this.startX,this.startY),this.context.stroke(),this.context.closePath()},handleSignEnd:function(t){},handleClearCanvas:function(){this.setData({dirty:!1,"visible.prevSign":!1}),this.visible.prevSign=!1,this.context.clearRect(0,0,1e3,1e3)},handleUserPrevSign:function(){this.handleClearCanvas(),this.visible.prevSign=!0,this.setData({"visible.prevSign":!0,dirty:!0})},handleRemovePrevSign:function(){this.visible.prevSign=!1,this.setData({"visible.prevSign":!1,dirty:!1})},handleConfirmSign:function(){this.dirty?this.visible.prevSign?(this.setData({signUrl:this.prevSignUrl,"visible.prevSign":!1}),this.setFinishSignStatus(),this.signUrl=this.prevSignUrl,this.visible.prevSign=!1):this.exportSignToImage():weui.alert("请先完成签名哦~")},exportSignToImage:function(){var t=this,e=A.toDataURL("image/png"),n=weui.loading();Object(x.b)(e).then(function(e){var i=e.errmsg.cdn_site+e.errmsg.imgs[0];t.setData({signUrl:i}),t.setFinishSignStatus(),t.updateUserInfo({sign:i}),n.hide()}).catch(function(t){n.hide(function(){weui.alert(t)})}).then(function(){})},handleConfirm:function(){var t=this;this.confirmAnimation?(this.setData({hidding:!0}),setTimeout(function(){t.$emit("confirm",{value:t.signUrl}),t.setData({hidding:!1})},1e3)):this.$emit("confirm",{value:this.signUrl})},handleClose:function(){this.$emit("close")}}),components:{XModal:b.a}},L={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("x-modal",{staticClass:"contract-modal",on:{close:t.handleClose}},[t.signing?t._e():n("div",{staticClass:"content-container"},[n("div",{staticClass:"title"},[t._v("\n            "+t._s(t.title)+"\n        ")]),t._v(" "),n("div",{staticClass:"content"},t._l(t.paragraphs,function(e,i){return n("div",{key:i,staticClass:"paragraph"},[t._v("\n                "+t._s(e)+"\n            ")])}),0),t._v(" "),n("div",{staticClass:"sign"},[n("span",{staticClass:"label"},[t._v("sign: ")]),t._v(" "),n("div",{staticClass:"sign-preview"},[t.signUrl?n("img",{staticClass:"sign-image",attrs:{src:t.signUrl,mode:"widthFix"}}):t._e()]),t._v(" "),t.signUrl?t._e():n("div",{staticClass:"go-sign",on:{click:t.handleShowSignCanvas}},[t._v("\n                点击签名\n            ")])]),t._v(" "),n("div",{staticClass:"tip"},[t._v("\n            活动形式自觉遵守，不具备法律效应\n        ")])]),t._v(" "),t.signUrl?n("div",{staticClass:"next-button",on:{click:t.handleConfirm}},[t._v("\n        "+t._s(t.confirmText)+"\n    ")]):t._e(),t._v(" "),t.signing?n("div",{staticClass:"contract"},[n("div",{staticClass:"body"},[n("div",{staticClass:"canvas-wrapper"},[t.visible.prevSign?t._e():n("canvas",{staticClass:"sign-canvas",attrs:{id:"sign"},on:{touchstart:t.handleSignStart,touchmove:t.handleSignMove,touchend:t.handleSignEnd,touchcancel:t.handleSignEnd}}),t._v(" "),t.dirty?t._e():n("div",{staticClass:"bg"},[n("img",{staticClass:"icon",attrs:{mode:"widthFix",src:"https://oss.pocketuniversity.cn/media/2018-11-29/5bfebd1b70861.png"}}),t._v("\n                    在此签名\n                ")]),t._v(" "),t.visible.prevSign?n("img",{staticClass:"prev-sign",attrs:{src:t.prevSignUrl},on:{click:t.handleRemovePrevSign}}):t._e()]),t._v(" "),n("div",{staticClass:"toolbox"},[n("div",{class:["user-prev",{hidden:t.prevSignUrl}],on:{click:t.handleUserPrevSign}},[t._v("\n                    用上一次的签名\n                ")]),t._v(" "),n("div",{staticClass:"clear",on:{click:t.handleClearCanvas}},[t._v("\n                    重置\n                ")])])]),t._v(" "),n("div",{staticClass:"footer"},[n("div",{staticClass:"button",on:{click:t.handleConfirmSign}},[t._v("\n                确认\n            ")]),t._v(" "),n("div",{staticClass:"tip"},[t._v("\n                活动形式自觉遵守，不具备法律效应\n            ")])])]):t._e()])},staticRenderFns:[]};var R=n("C7Lr")(q,L,!1,function(t){n("dbZL"),n("vm2g")},"data-v-2cac6d05",null).exports,E=n("tUmU"),M={props:{nickname:String},data:function(){return{visible:{kf:!1,duplication:!0}}},methods:{handleChangeOne:function(){this.$emit("change")},handleClose:function(){this.$emit("close")}},components:{XModal:b.a,ContactXxd:E.a}},N={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"wrapper"},[t.visible.duplication?n("x-modal",{attrs:{"z-index":6e3},on:{close:t.handleClose}},[n("div",{staticClass:"phone-duplication"},[n("div",{staticClass:"title"},[t._v("\n            很抱歉, 该手机号已被绑定\n        ")]),t._v(" "),n("div",{staticClass:"subtitle"},[t._v("\n            注册时的账号昵称为："),n("span",{staticClass:"nickname"},[t._v(t._s(t.nickname))])]),t._v(" "),n("div",{staticClass:"list"},[n("a",{staticClass:"list-item",attrs:{href:"http://mp.weixin.qq.com/s?__biz=MzU0NTU4NDcxNA==&mid=100004131&idx=1&sn=44c84e9f756b231ed750a60bf636f77d&chksm=7b6bf2064c1c7b108bca9ae0755700b2da15b86ea8c68b21390f2ed0b32d2613f53e7bb38a2e#rd"}},[t._v("\n                上面是我的账号, 但是我想重新注册\n            ")]),t._v(" "),n("a",{staticClass:"list-item",on:{click:function(e){t.visible.kf=!0,t.visible.duplication=!1}}},[t._v("\n                上面不是我的账号, 联系客服换绑\n            ")]),t._v(" "),n("div",{staticClass:"list-item",on:{click:t.handleChangeOne}},[t._v("\n                换一个手机号, 重新绑定\n            ")])])])]):t._e(),t._v(" "),t.visible.kf?n("x-modal",{on:{close:function(e){t.visible.kf=!1,t.visible.duplication=!0}}},[n("contact-xxd",{attrs:{qrcode:"https://oss.pocketuniversity.cn/media/2019-04-27/5cc3cde4b65fa.jpg"}},[n("div",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v("\n            联系小象导\n        ")]),t._v(" "),n("div",{attrs:{slot:"uidtip"},slot:"uidtip"},[t._v("\n            可能会在过程中用到\n        ")])])],1):t._e()],1)},staticRenderFns:[]};var B=n("C7Lr")(M,N,!1,function(t){n("b825")},"data-v-fe02bed8",null).exports,G=n("plQk"),z=n("i/cM");function H(t,e){var n=[],i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:"").split(",");for(var r in t){var a=t[r].id;e.length&&!e.includes(a)||n.push(l()({},t[r],{active:i.includes(a)}))}return n}n("ZLEe");var W=n("hRKE"),X=n.n(W),$=/%[sdj%]/g,Y=function(){};function Q(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=1,r=e[0],a=e.length;if("function"==typeof r)return r.apply(null,e.slice(1));if("string"==typeof r){for(var o=String(r).replace($,function(t){if("%%"===t)return"%";if(i>=a)return t;switch(t){case"%s":return String(e[i++]);case"%d":return Number(e[i++]);case"%j":try{return JSON.stringify(e[i++])}catch(t){return"[Circular]"}break;default:return t}}),s=e[i];i<a;s=e[++i])o+=" "+s;return o}return r}function V(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!function(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"pattern"===t}(e)||"string"!=typeof t||t))}function K(t,e,n){var i=0,r=t.length;!function a(o){if(o&&o.length)n(o);else{var s=i;i+=1,s<r?e(t[s],a):n([])}}([])}function Z(t,e,n,i){if(e.first)return K(function(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n])}),e}(t),n,i);var r=e.firstFields||[];!0===r&&(r=Object.keys(t));var a=Object.keys(t),o=a.length,s=0,c=[],u=function(t){c.push.apply(c,t),++s===o&&i(c)};a.forEach(function(e){var i=t[e];-1!==r.indexOf(e)?K(i,n,u):function(t,e,n){var i=[],r=0,a=t.length;function o(t){i.push.apply(i,t),++r===a&&n(i)}t.forEach(function(t){e(t,o)})}(i,n,u)})}function J(t){return function(e){return e&&e.message?(e.field=e.field||t.fullField,e):{message:e,field:e.field||t.fullField}}}function tt(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"object"===(void 0===i?"undefined":X()(i))&&"object"===X()(t[n])?t[n]=l()({},t[n],i):t[n]=i}return t}var et=function(t,e,n,i,r,a){!t.required||n.hasOwnProperty(t.field)&&!V(e,a||t.type)||i.push(Q(r.messages.required,t.fullField))};var nt=function(t,e,n,i,r){(/^\s+$/.test(e)||""===e)&&i.push(Q(r.messages.whitespace,t.fullField))},it={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},rt={integer:function(t){return rt.number(t)&&parseInt(t,10)===t},float:function(t){return rt.number(t)&&!rt.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(t){return!1}},date:function(t){return"function"==typeof t.getTime&&"function"==typeof t.getMonth&&"function"==typeof t.getYear},number:function(t){return!isNaN(t)&&"number"==typeof t},object:function(t){return"object"===(void 0===t?"undefined":X()(t))&&!rt.array(t)},method:function(t){return"function"==typeof t},email:function(t){return"string"==typeof t&&!!t.match(it.email)&&t.length<255},url:function(t){return"string"==typeof t&&!!t.match(it.url)},hex:function(t){return"string"==typeof t&&!!t.match(it.hex)}};var at="enum";var ot={required:et,whitespace:nt,type:function(t,e,n,i,r){if(t.required&&void 0===e)et(t,e,n,i,r);else{var a=t.type;["integer","float","array","regexp","object","method","email","number","date","url","hex"].indexOf(a)>-1?rt[a](e)||i.push(Q(r.messages.types[a],t.fullField,t.type)):a&&(void 0===e?"undefined":X()(e))!==t.type&&i.push(Q(r.messages.types[a],t.fullField,t.type))}},range:function(t,e,n,i,r){var a="number"==typeof t.len,o="number"==typeof t.min,s="number"==typeof t.max,c=e,u=null,l="number"==typeof e,f="string"==typeof e,d=Array.isArray(e);if(l?u="number":f?u="string":d&&(u="array"),!u)return!1;d&&(c=e.length),f&&(c=e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length),a?c!==t.len&&i.push(Q(r.messages[u].len,t.fullField,t.len)):o&&!s&&c<t.min?i.push(Q(r.messages[u].min,t.fullField,t.min)):s&&!o&&c>t.max?i.push(Q(r.messages[u].max,t.fullField,t.max)):o&&s&&(c<t.min||c>t.max)&&i.push(Q(r.messages[u].range,t.fullField,t.min,t.max))},enum:function(t,e,n,i,r){t[at]=Array.isArray(t[at])?t[at]:[],-1===t[at].indexOf(e)&&i.push(Q(r.messages[at],t.fullField,t[at].join(", ")))},pattern:function(t,e,n,i,r){t.pattern&&(t.pattern instanceof RegExp?(t.pattern.lastIndex=0,t.pattern.test(e)||i.push(Q(r.messages.pattern.mismatch,t.fullField,e,t.pattern))):"string"==typeof t.pattern&&(new RegExp(t.pattern).test(e)||i.push(Q(r.messages.pattern.mismatch,t.fullField,e,t.pattern))))}};var st="enum";var ct=function(t,e,n,i,r){var a=t.type,o=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e,a)&&!t.required)return n();ot.required(t,e,i,o,r,a),V(e,a)||ot.type(t,e,i,o,r)}n(o)},ut={string:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e,"string")&&!t.required)return n();ot.required(t,e,i,a,r,"string"),V(e,"string")||(ot.type(t,e,i,a,r),ot.range(t,e,i,a,r),ot.pattern(t,e,i,a,r),!0===t.whitespace&&ot.whitespace(t,e,i,a,r))}n(a)},method:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&ot.type(t,e,i,a,r)}n(a)},number:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&(ot.type(t,e,i,a,r),ot.range(t,e,i,a,r))}n(a)},boolean:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&ot.type(t,e,i,a,r)}n(a)},regexp:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),V(e)||ot.type(t,e,i,a,r)}n(a)},integer:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&(ot.type(t,e,i,a,r),ot.range(t,e,i,a,r))}n(a)},float:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&(ot.type(t,e,i,a,r),ot.range(t,e,i,a,r))}n(a)},array:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e,"array")&&!t.required)return n();ot.required(t,e,i,a,r,"array"),V(e,"array")||(ot.type(t,e,i,a,r),ot.range(t,e,i,a,r))}n(a)},object:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),void 0!==e&&ot.type(t,e,i,a,r)}n(a)},enum:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();ot.required(t,e,i,a,r),e&&ot[st](t,e,i,a,r)}n(a)},pattern:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e,"string")&&!t.required)return n();ot.required(t,e,i,a,r),V(e,"string")||ot.pattern(t,e,i,a,r)}n(a)},date:function(t,e,n,i,r){var a=[];if(t.required||!t.required&&i.hasOwnProperty(t.field)){if(V(e)&&!t.required)return n();if(ot.required(t,e,i,a,r),!V(e)){var o=void 0;o="number"==typeof e?new Date(e):e,ot.type(t,o,i,a,r),o&&ot.range(t,o.getTime(),i,a,r)}}n(a)},url:ct,hex:ct,email:ct,required:function(t,e,n,i,r){var a=[],o=Array.isArray(e)?"array":void 0===e?"undefined":X()(e);ot.required(t,e,i,a,r,o),n(a)}};function lt(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var ft=lt();function dt(t){this.rules=null,this._messages=ft,this.define(t)}dt.prototype={messages:function(t){return t&&(this._messages=tt(lt(),t)),this._messages},define:function(t){if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==(void 0===t?"undefined":X()(t))||Array.isArray(t))throw new Error("Rules must be an object");this.rules={};var e=void 0,n=void 0;for(e in t)t.hasOwnProperty(e)&&(n=t[e],this.rules[e]=Array.isArray(n)?n:[n])},validate:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],r=t,a=n,o=i;if("function"==typeof a&&(o=a,a={}),this.rules&&0!==Object.keys(this.rules).length){if(a.messages){var s=this.messages();s===ft&&(s=lt()),tt(s,a.messages),a.messages=s}else a.messages=this.messages();var c=void 0,u=void 0,f={};(a.keys||Object.keys(this.rules)).forEach(function(n){c=e.rules[n],u=r[n],c.forEach(function(i){var a=i;"function"==typeof a.transform&&(r===t&&(r=l()({},r)),u=r[n]=a.transform(u)),(a="function"==typeof a?{validator:a}:l()({},a)).validator=e.getValidationMethod(a),a.field=n,a.fullField=a.fullField||n,a.type=e.getType(a),a.validator&&(f[n]=f[n]||[],f[n].push({rule:a,value:u,source:r,field:n}))})});var d={};Z(f,a,function(t,e){var n=t.rule,i=!("object"!==n.type&&"array"!==n.type||"object"!==X()(n.fields)&&"object"!==X()(n.defaultField));function r(t,e){return l()({},e,{fullField:n.fullField+"."+t})}function o(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(Array.isArray(o)||(o=[o]),o.length&&dt.warning("async-validator:",o),o.length&&n.message&&(o=[].concat(n.message)),o=o.map(J(n)),a.first&&o.length)return d[n.field]=1,e(o);if(i){if(n.required&&!t.value)return o=n.message?[].concat(n.message).map(J(n)):a.error?[a.error(n,Q(a.messages.required,n.field))]:[],e(o);var s={};if(n.defaultField)for(var c in t.value)t.value.hasOwnProperty(c)&&(s[c]=n.defaultField);for(var u in s=l()({},s,t.rule.fields))if(s.hasOwnProperty(u)){var f=Array.isArray(s[u])?s[u]:[s[u]];s[u]=f.map(r.bind(null,u))}var h=new dt(s);h.messages(a.messages),t.rule.options&&(t.rule.options.messages=a.messages,t.rule.options.error=a.error),h.validate(t.value,t.rule.options||a,function(t){e(t&&t.length?o.concat(t):t)})}else e(o)}i=i&&(n.required||!n.required&&t.value),n.field=t.field;var s=n.validator(n,t.value,o,t.source,a);s&&s.then&&s.then(function(){return o()},function(t){return o(t)})},function(t){!function(t){var e,n=void 0,i=void 0,r=[],a={};for(n=0;n<t.length;n++)e=t[n],Array.isArray(e)?r=r.concat.apply(r,e):r.push(e);if(r.length)for(n=0;n<r.length;n++)a[i=r[n].field]=a[i]||[],a[i].push(r[n]);else r=null,a=null;o(r,a)}(t)})}else o&&o()},getType:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!=typeof t.validator&&t.type&&!ut.hasOwnProperty(t.type))throw new Error(Q("Unknown rule type %s",t.type));return t.type||"string"},getValidationMethod:function(t){if("function"==typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?ut.required:ut[this.getType(t)]||!1}},dt.register=function(t,e){if("function"!=typeof e)throw new Error("Cannot register a validator by type, validator is not a function");ut[t]=e},dt.warning=Y,dt.messages=ft;var ht=dt,pt={sex:[{required:!0,type:"enum",enum:["1","2",1,2],message:"请选择性别"}],height:[{required:!0,message:"请填写你的身高"}],age:[{type:"string",required:!0,message:"请选择你的生日"}],home:[{type:"string",required:!0,message:"请选择你所在的城市"}],qq:[{validator:function(t,e,n,i,r){var a=[];i.qq||i.weixin||a.push("请填写你的qq号"),n(a)}}],weixin:[{validator:function(t,e,n,i,r){var a=[];i.qq||i.weixin||a.push("请填写你的微信号"),n(a)}}],phone:[{required:!0,message:"请填写你的手机号"}],school:[{required:!0,message:"请填写你的学校"}],address:[{required:!0,message:"请选择你所在的城市"}]},gt=["sex","height","age","home","qq","weixin","phone","school","address"];function vt(t,e){var n=mt(gt);new ht(n).validate(t,function(t,n){return e(t||null)})}function mt(){var t={};return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).forEach(function(e){t[e]=pt[e]}),t}var yt,wt=n("6U9h"),bt=n.n(wt),_t={name:"HomeIndex",data:function(){return{formInfo:null,allUserTags:[],allTags:{1:{name:"我的标签",tags:[]},2:{name:"可聊话题",tags:[]},3:{name:"日常运动",tags:[]},4:{name:"音乐偏好",tags:[]}},enrollList:[],isBaseInfoComplete:!0,restDay:0,visible:{phone:!1,subscribe:!1,contract:!1,phoneDuplication:!1},phoneDuplicationNickname:"",type:"pair"}},computed:l()({},Object(f.d)(["queryMediaId","isLogin"]),Object(f.d)("user",["userInfo"]),Object(f.d)("fpdx",["currentSignActivity"]),{renderPhoto:function(){return this.formInfo.photo_src?"https://oss.pocketuniversity.cn"+this.formInfo.photo_src:""}}),created:function(){if(!this.isLogin||!this.userInfo.phone)return this.visible.phone=!0,void(this.isLogin&&this.init());this.init()},methods:l()({},Object(f.c)("sign",["saveSignUrl"]),Object(f.b)("user",["updateUserInfo"]),(yt={init:function(){var t=this;this.formInfo=JSON.parse(c()(this.userInfo)),this.type=this.$route.query.type,"qbj"==this.type&&_kd.setWxTitle("时遇记情报局活动"),this.userInfo.phone||(this.visible.phone=!0),this.allUserTags[1]||Object(x.a)().then(function(e){t.allUserTags=e.errmsg,t.initTag()}),vt(this.formInfo,function(e){e&&(t.isBaseInfoComplete=!1)}),this.fetchUserInfo(),Object(G.f)().then(function(e){t.enrollList=e.data.map(function(t){var e=((new Date).getTime()-1e3*t.create_time)/1e3/60;return l()({},t,{nickname:t.user.nickname.slice(0,2)+"*",time_before:Math.floor(e)})})}),this.restDay=bt()(1e3*this.currentSignActivity.activity_time).diff(bt()(),"day")},fetchUserInfo:function(){var t=this,e=weui.loading();Object(z.a)().then(function(e){t.formInfo=l()({},e.data,{expect:t.formInfo.expect,introduce:t.formInfo.introduce,life:t.formInfo.life,why:t.formInfo.why}),vt(t.formInfo,function(e){e&&(t.isBaseInfoComplete=!1)})}).catch(function(t){}).then(function(t){e.hide()})},handleUploadPhotoOk:function(t){this.handleSave({key:"photo_src",value:t.data.imgUrl})},initTag:function(){this.allTags[1].tags=H(this.allUserTags[1],[],this.formInfo.tag_1||""),this.allTags[2].tags=H(this.allUserTags[2],[],this.formInfo.tag_2||""),this.allTags[3].tags=H(this.allUserTags[3],[],this.formInfo.tag_3||""),this.allTags[4].tags=H(this.allUserTags[4],[],this.formInfo.tag_4||""),console.log("this.allTags",this.allTags,this.formInfo)},handleChooseTag:function(t){var e=t.currentTarget.dataset.tagId,n=t.currentTarget.dataset.group,i=this.allTags[n].tags.findIndex(function(t){return t.id==e});this.allTags[n].tags[i].active=!this.allTags[n].tags[i].active,Object(z.b)({tag_id:e,group:n})},handlePhoneBindOk:function(t){location.reload()}},r()(yt,"handleUploadPhotoOk",function(t){this.formInfo.photo_src=t.data.imgUrl;var e=weui.loading();this.updateUserInfo({photo_src:this.formInfo.photo_src}).then(function(t){if(200!=t.code)return o.a.reject(t.message);e.hide()}).catch(function(t){e.hide(function(){weui.alert(t)})})}),r()(yt,"beforeNext",function(){var t=this,e=this.allTags[1].tags.some(function(t){return t.active}),n=this.allTags[2].tags.some(function(t){return t.active});if(!this.isBaseInfoComplete)return weui.alert("请先完善基础信息哦~");e?n?0!=this.formInfo.sex?(this.updateUserInfo({introduce:this.formInfo.introduce,expect:this.formInfo.expect,last_life:this.formInfo.last_life,why:this.formInfo.why}),this.checkInvalidData(function(){t.$router.replace("/preference?type="+t.type)})):weui.alert("请选择性别哦~"):weui.alert("请至少选择一个可聊话题哦~"):weui.alert("请至少选择一个我的标签哦~")}),r()(yt,"checkInvalidData",function(t){var e=this,n=this.formInfo,i=n.height,r=n.age,a=null,o="";i<140||i>250?(a="height",o="当前身高为: "+i+"CM, 若填写有误会影响匹配哦~请再次确认"):(bt()(r).isBefore(bt()("1980-01-01"))||bt()(r).isAfter(bt()().subtract(16,"year")))&&(a="age",o="当前选择的生日为: "+r+", 若填写有误会影响匹配哦~请再次确认"),a?weui.alert(o,{buttons:[{label:"确认",type:"default",onClick:function(){t()}},{label:"去修改",type:"primary",onClick:function(){e.$router.push("baseinfo?errkey="+a)}}]}):t&&t()}),r()(yt,"handleDuplication",function(t){this.visible.phoneDuplication=!0,this.phoneDuplicationNickname=t.nickname}),yt)),components:{UserCell:g,TagItem:y,PhoneVerification:w.a,XModal:b.a,PhotoUploader:I,XForm:O,XFormItem:T,Contract:R,PhoneDuplication:B}},xt={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-index"},[t.isLogin?n("div",{staticClass:"baseinfo__uploader"},[n("photo-uploader",{attrs:{url:t.renderPhoto},on:{ok:t.handleUploadPhotoOk}})],1):t._e(),t._v(" "),t.isLogin?n("router-link",{staticClass:"home-index__user-cell",attrs:{to:"/home/baseinfo"}},[n("user-cell",{attrs:{data:t.formInfo}},[t.isBaseInfoComplete?t._e():n("span",{attrs:{slot:"footer-text"},slot:"footer-text"},[t._v("请先完善基础信息")])])],1):t._e(),t._v(" "),t.isLogin?n("x-form",{attrs:{"i-class":"form",title:"个人描述",subtitle:"对自己的描述，有助于你们了解彼此"}},[n("x-form-item",{attrs:{title:"对自己的描述"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formInfo.introduce,expression:"formInfo.introduce"}],staticClass:"form-textarea",attrs:{placeholder:"听说写的越认真，魅力值越高哦~ ",rows:"3","data-key":"introduce"},domProps:{value:t.formInfo.introduce},on:{input:function(e){e.target.composing||t.$set(t.formInfo,"introduce",e.target.value)}}})]),t._v(" "),n("x-form-item",{attrs:{title:"对另一半有什么期待"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formInfo.expect,expression:"formInfo.expect"}],staticClass:"form-textarea",attrs:{placeholder:"仔细想一想哦~（不会作为系统匹配条件）",rows:"3","data-key":"expect"},domProps:{value:t.formInfo.expect},on:{input:function(e){e.target.composing||t.$set(t.formInfo,"expect",e.target.value)}}})]),t._v(" "),n("x-form-item",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                说一说你最近的生活状态"),n("span",{staticClass:"optional"},[t._v("（选填）")])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formInfo.last_life,expression:"formInfo.last_life"}],staticClass:"form-textarea",attrs:{placeholder:"仔细想一想哦~（不会作为系统匹配条件）",rows:"3","data-key":"last_life"},domProps:{value:t.formInfo.last_life},on:{input:function(e){e.target.composing||t.$set(t.formInfo,"last_life",e.target.value)}}})]),t._v(" "),n("x-form-item",[n("div",{attrs:{slot:"title"},slot:"title"},[t._v("\n                说说你为什么想参与本次活动"),n("span",{staticClass:"optional"},[t._v("（选填）")])]),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.formInfo.why,expression:"formInfo.why"}],staticClass:"form-textarea",attrs:{placeholder:"认真回答，有助于你更好的体验活动哦~",rows:"3","data-key":"why"},domProps:{value:t.formInfo.why},on:{input:function(e){e.target.composing||t.$set(t.formInfo,"why",e.target.value)}}})])],1):t._e(),t._v(" "),t.isLogin?n("x-form",{staticClass:"form-tag",attrs:{title:"兴趣匹配项（必填）",subtitle:"在万人中精确的找到臭味相投的ta"}},t._l(t.allTags,function(e,i){return n("x-form-item",{key:i,class:{"tag-wrapper-item":4!=i},attrs:{title:e.name}},[n("div",{staticClass:"tags__container"},t._l(e.tags,function(e,i){return n("div",{key:e.id,class:["tag-item",{"tag-item_active":e.active}],attrs:{"data-tagindex":i,"data-tag-id":e.id,"data-group":e.group},on:{click:t.handleChooseTag}},[t._v("   \n                    "+t._s(e.name)+"\n                ")])}),0)])}),1):t._e(),t._v(" "),n("div",{staticClass:"attend-form__btn_ft",on:{click:t.beforeNext}},[t._v("\n        下一步（选择匹配偏好)\n    ")]),t._v(" "),t.visible.phone?n("x-modal",{attrs:{"z-index":3e3}},[n("phone-verification",{attrs:{title:"手机号验证","button-text":"绑定"},on:{ok:t.handlePhoneBindOk,duplication:t.handleDuplication}})],1):t._e(),t._v(" "),t.visible.phoneDuplication?n("phone-duplication",{attrs:{nickname:t.phoneDuplicationNickname},on:{close:function(e){t.visible.phoneDuplication=!1},change:function(e){t.visible.phoneDuplication=!1}}}):t._e(),t._v(" "),t.visible.subscribe?n("x-modal",[n("subscribe")],1):t._e()],1)},staticRenderFns:[]};var St=n("C7Lr")(_t,xt,!1,function(t){n("iK9d")},null,null);e.default=St.exports},BQOe:function(t,e,n){n("FMQC"),n("zjBV"),n("LPNR"),n("0xS9"),t.exports=n("/KQr").Symbol},DjFK:function(t,e,n){"use strict";var i=n("rVsN"),r=n.n(i),a=n("xzo8"),o=n("4YfN"),s=n.n(o),c=n("R4Sj"),u=n("jJsW"),l={mixins:[{computed:s()({},Object(c.d)(["wxAuthInfo"])),methods:s()({},Object(c.b)("user",["updateUserInfo","fetchUserInfo"]),{register:function(){var t=this,e=weui.loading();this.registering=!0,u.a.isLogin()?u.a.bindPhone(this.phone).then(function(e){if(401!=e.code)return 200!=e.code?weui.alert("手机号绑定失败, 请重试: "+e.message):void t.enter();t.execWhenPhoneDuplication({nickname:e.data.nickname,type:"bind"})}).catch(function(t){weui.alert("手机号绑定失败, 请重试")}).then(function(){t.registering=!1}):Object(a.e)({phone:this.phone}).then(function(n){return 401==n.code?(t.execWhenPhoneDuplication({nickname:n.data.nickname,type:"register"}),r.a.reject({code:-1})):200!=n.code?r.a.reject(n.message):(e.hide(),void t.loginSuccessCallback(n.data))}).catch(function(n){e.hide(),n&&-1==n.code||(t.reset&&t.reset(),weui.alert("注册失败, 请重试: "+n))}).then(function(){t.registering=!1})},execWhenPhoneDuplication:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.nickname,i=e.type;weui.alert("",{title:"",content:"当前手机号已被其他账号绑定，继续会以昵称："+n+" 的账号身份登录。",buttons:[{label:"取消",type:"default",onClick:function(){t.reset&&t.reset()}},{label:"继续",type:"primary",onClick:function(){t.loginUsePhone(i)}}]})},loginUsePhone:function(t){var e=this,n=weui.loading();Object(a.d)({authkey:this.phone}).then(function(i){if(200!=i.code)return r.a.reject(i.message);n.hide();var a=null;switch(t){case"bind":a=e.loginSuccessCallbackWhenBindPhone;break;case"register":a=e.loginSuccessCallback;break;default:a=e.loginSuccessCallback}a.bind(e)(i.data)}).catch(function(t){n.hide(),weui.alert("登录失败, 请重试:"+t)})},loginSuccessCallbackCommon:function(t){var e=t.token,n=t.expiresIn;u.a.saveToken({token:e,expiresIn:n}),this.wxAuthInfo.openId&&u.a.bindOpenId(this.wxAuthInfo.openId),this.wxAuthInfo.unionId&&u.a.bindUnionId(this.wxAuthInfo.unionId)},loginSuccessCallback:function(t){var e=this;this.loginSuccessCallbackCommon({token:t.token,expiresIn:t.expiresIn});var n=weui.loading();this.fetchUserInfo().then(function(t){if(n.hide(),weui.toast("登录成功",{mask:!0}),e.wxAuthInfo){var i=e.wxAuthInfo,r={};i.headimgurl&&!t.headimgurl&&(r.headimgurl=i.headimgurl),i.nickname&&!t.nickname&&(r.nickname=i.nickname),e.updateUserInfo(r)}e.enter()}).catch(function(t){weui.alert("登录失败, 请重试: "+t)}).then(function(){n.hide()})},loginSuccessCallbackWhenBindPhone:function(t){var e=this;this.loginSuccessCallbackCommon({token:t.token,expiresIn:t.expiresIn}),this.fetchUserInfo().then(function(){console.log(e),e.enter()}).catch(function(t){weui.alert("登录失败, 请重试: "+t)})},enter:function(){setTimeout(function(){location.reload()},500)}})}],props:{title:{type:String,default:"手机号验证"},tip:String,buttonText:{type:String,default:"确定"}},data:function(){return{phone:"",code:"",countdownnumber:0,loading:!1,userDenyWxAuth:!1,times:0}},mounted:function(){},methods:{fetchSmscode:function(){var t=this;if(this.phone){if(11==this.phone.length)return this.loading=!0,Object(a.f)({phone:this.phone}).then(function(e){if(200!=e.code)return r.a.reject(e.message);t.hasSendSmscode=!0,t.startCountDown(),t.$nextTick(function(){weui.toast("验证码发送成功")})}).catch(function(e){weui.alert(e),t.loading=!1});weui.topTips("请输入正确的手机号")}else weui.topTips("请输入手机号")},beforeBind:function(){var t=this;this.phone&&this.code?Object(a.b)({phone:this.phone,code:this.code}).then(function(e){if(200!=e.code)return weui.alert(e.message),r.a.reject();t.register()}).catch(function(t){weui.alert(t)}):weui.alert("请填写手机号和验证码")},bind:function(){this.handleCheckOk()},startCountDown:function(){this.countdownnumber=60,this.times=this.times+1,this.countdown()},countdown:function(){var t=this;setTimeout(function(){t.countdownnumber=t.countdownnumber-1,t.countdownnumber<=0?t.countdownnumber=0:t.countdown()},1e3)},handleCheckOk:function(){this.$emit("ok",{phone:this.phone})}}},f={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"phone-verification"},[n("div",{staticClass:"title"},[t._v("\n        "+t._s(t.title)+"\n    ")]),t._v(" "),n("div",{staticClass:"tip"},[t._v("\n        "+t._s(t.tip)+"\n    ")]),t._v(" "),n("div",{staticClass:"form-wrapper"},[n("div",{staticClass:"form"},[n("div",{staticClass:"form-item"},[n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],staticClass:"input-inner",attrs:{placeholder:"输入你的手机号码",type:"number"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"form-item"},[n("div",{staticClass:"form-input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.code,expression:"code"}],staticClass:"input-inner",attrs:{placeholder:"输入验证码",type:"number"},domProps:{value:t.code},on:{input:function(e){e.target.composing||(t.code=e.target.value)}}})]),t._v(" "),t.countdownnumber?n("div",{staticClass:"form-btn form-btn_countdown"},[t._v("\n                    "+t._s(t.countdownnumber)+"s\n                ")]):n("div",{staticClass:"form-btn",on:{click:t.fetchSmscode}},[t._v("\n                    "+t._s(t.times>=1?"重新发送":"发送验证码")+"\n                ")])])])]),t._v(" "),n("div",{staticClass:"button",on:{click:t.beforeBind}},[t._v("\n        "+t._s(t.buttonText)+"\n    ")]),t._v(" "),n("img",{staticClass:"logo",attrs:{src:"https://oss.pocketuniversity.cn/media/2019-07-16/5d2d70cc869b4.png"}})])},staticRenderFns:[]};var d=n("C7Lr")(l,f,!1,function(t){n("9X8G")},"data-v-9250c7fc",null);e.a=d.exports},FMQC:function(t,e,n){"use strict";var i=n("Dmm0"),r=n("ndDS"),a=n("2gJQ"),o=n("2AZ7"),s=n("D8Sn"),c=n("op0e").KEY,u=n("D86D"),l=n("TLnR"),f=n("AhUs"),d=n("R4LY"),h=n("aThA"),p=n("RsVo"),g=n("7q9M"),v=n("uCbw"),m=n("aLOx"),y=n("y4M0"),w=n("yLZD"),b=n("cKhS"),_=n("SwaK"),x=n("0ZA2"),S=n("+Vp4"),C=n("ZkHO"),I=n("QIvq"),k=n("0hE2"),P=n("H5bT"),O=I.f,F=k.f,D=C.f,T=i.Symbol,U=i.JSON,j=U&&U.stringify,A=h("_hidden"),q=h("toPrimitive"),L={}.propertyIsEnumerable,R=l("symbol-registry"),E=l("symbols"),M=l("op-symbols"),N=Object.prototype,B="function"==typeof T,G=i.QObject,z=!G||!G.prototype||!G.prototype.findChild,H=a&&u(function(){return 7!=S(F({},"a",{get:function(){return F(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=O(N,e);i&&delete N[e],F(t,e,n),i&&t!==N&&F(N,e,i)}:F,W=function(t){var e=E[t]=S(T.prototype);return e._k=t,e},X=B&&"symbol"==typeof T.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof T},$=function(t,e,n){return t===N&&$(M,e,n),y(t),e=_(e,!0),y(n),r(E,e)?(n.enumerable?(r(t,A)&&t[A][e]&&(t[A][e]=!1),n=S(n,{enumerable:x(0,!1)})):(r(t,A)||F(t,A,x(1,{})),t[A][e]=!0),H(t,e,n)):F(t,e,n)},Y=function(t,e){y(t);for(var n,i=v(e=b(e)),r=0,a=i.length;a>r;)$(t,n=i[r++],e[n]);return t},Q=function(t){var e=L.call(this,t=_(t,!0));return!(this===N&&r(E,t)&&!r(M,t))&&(!(e||!r(this,t)||!r(E,t)||r(this,A)&&this[A][t])||e)},V=function(t,e){if(t=b(t),e=_(e,!0),t!==N||!r(E,e)||r(M,e)){var n=O(t,e);return!n||!r(E,e)||r(t,A)&&t[A][e]||(n.enumerable=!0),n}},K=function(t){for(var e,n=D(b(t)),i=[],a=0;n.length>a;)r(E,e=n[a++])||e==A||e==c||i.push(e);return i},Z=function(t){for(var e,n=t===N,i=D(n?M:b(t)),a=[],o=0;i.length>o;)!r(E,e=i[o++])||n&&!r(N,e)||a.push(E[e]);return a};B||(s((T=function(){if(this instanceof T)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===N&&e.call(M,n),r(this,A)&&r(this[A],t)&&(this[A][t]=!1),H(this,t,x(1,n))};return a&&z&&H(N,t,{configurable:!0,set:e}),W(t)}).prototype,"toString",function(){return this._k}),I.f=V,k.f=$,n("tkAn").f=C.f=K,n("n1iq").f=Q,n("SQZr").f=Z,a&&!n("4I+n")&&s(N,"propertyIsEnumerable",Q,!0),p.f=function(t){return W(h(t))}),o(o.G+o.W+o.F*!B,{Symbol:T});for(var J="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),tt=0;J.length>tt;)h(J[tt++]);for(var et=P(h.store),nt=0;et.length>nt;)g(et[nt++]);o(o.S+o.F*!B,"Symbol",{for:function(t){return r(R,t+="")?R[t]:R[t]=T(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in R)if(R[e]===t)return e},useSetter:function(){z=!0},useSimple:function(){z=!1}}),o(o.S+o.F*!B,"Object",{create:function(t,e){return void 0===e?S(t):Y(S(t),e)},defineProperty:$,defineProperties:Y,getOwnPropertyDescriptor:V,getOwnPropertyNames:K,getOwnPropertySymbols:Z}),U&&o(o.S+o.F*(!B||u(function(){var t=T();return"[null]"!=j([t])||"{}"!=j({a:t})||"{}"!=j(Object(t))})),"JSON",{stringify:function(t){for(var e,n,i=[t],r=1;arguments.length>r;)i.push(arguments[r++]);if(n=e=i[1],(w(e)||void 0!==t)&&!X(t))return m(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,j.apply(U,i)}}),T.prototype[q]||n("bnAR")(T.prototype,q,T.prototype.valueOf),f(T,"Symbol"),f(Math,"Math",!0),f(i.JSON,"JSON",!0)},FPXL:function(t,e){},GNRM:function(t,e){},IHur:function(t,e,n){var i=n("A2+p"),r=n("H5bT");n("Y2FG")("keys",function(){return function(t){return r(i(t))}})},IYkF:function(t,e,n){t.exports={default:n("KIjQ"),__esModule:!0}},KIjQ:function(t,e,n){n("W/pk");var i=n("/KQr").Object;t.exports=function(t,e){return i.create(t,e)}},LPNR:function(t,e,n){n("7q9M")("asyncIterator")},NUnD:function(t,e,n){var i=n("/KQr"),r=i.JSON||(i.JSON={stringify:JSON.stringify});t.exports=function(t){return r.stringify.apply(r,arguments)}},Nvzs:function(t,e){},OHEZ:function(t,e,n){"use strict";e.a={props:{type:{default:""},custom:{default:""},size:{default:14},color:{default:""},bold:Boolean}}},P8jM:function(t,e){},QIvq:function(t,e,n){var i=n("n1iq"),r=n("0ZA2"),a=n("cKhS"),o=n("SwaK"),s=n("ndDS"),c=n("Xv73"),u=Object.getOwnPropertyDescriptor;e.f=n("2gJQ")?u:function(t,e){if(t=a(t),e=o(e,!0),c)try{return u(t,e)}catch(t){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},RsVo:function(t,e,n){e.f=n("aThA")},"Sg+2":function(t,e,n){var i=n("2AZ7");i(i.S+i.F*!n("2gJQ"),"Object",{defineProperty:n("0hE2").f})},"VC+f":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"W/pk":function(t,e,n){var i=n("2AZ7");i(i.S,"Object",{create:n("+Vp4")})},Y2FG:function(t,e,n){var i=n("2AZ7"),r=n("/KQr"),a=n("D86D");t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],o={};o[t]=e(n),i(i.S+i.F*a(function(){n(1)}),"Object",o)}},Ycmu:function(t,e){(function(e){t.exports=e}).call(e,{})},Yyxk:function(t,e,n){t.exports={default:n("BQOe"),__esModule:!0}},ZLEe:function(t,e,n){t.exports={default:n("m5p0"),__esModule:!0}},ZkHO:function(t,e,n){var i=n("cKhS"),r=n("tkAn").f,a={}.toString,o="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[];t.exports.f=function(t){return o&&"[object Window]"==a.call(t)?function(t){try{return r(t)}catch(t){return o.slice()}}(t):r(i(t))}},a3Yh:function(t,e,n){"use strict";e.__esModule=!0;var i,r=n("liLe"),a=(i=r)&&i.__esModule?i:{default:i};e.default=function(t,e,n){return e in t?(0,a.default)(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},aAP0:function(t,e){},aLOx:function(t,e,n){var i=n("402Z");t.exports=Array.isArray||function(t){return"Array"==i(t)}},b825:function(t,e){},dbZL:function(t,e){},hRKE:function(t,e,n){"use strict";e.__esModule=!0;var i=o(n("2LoE")),r=o(n("Yyxk")),a="function"==typeof r.default&&"symbol"==typeof i.default?function(t){return typeof t}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":typeof t};function o(t){return t&&t.__esModule?t:{default:t}}e.default="function"==typeof r.default&&"symbol"===a(i.default)?function(t){return void 0===t?"undefined":a(t)}:function(t){return t&&"function"==typeof r.default&&t.constructor===r.default&&t!==r.default.prototype?"symbol":void 0===t?"undefined":a(t)}},iK9d:function(t,e){},jRRQ:function(t,e){},l4Be:function(t,e,n){"use strict";e.a=function(){return Object(i.a)("https://msy.pocketuniversity.cn/chargePartner/api/getAll")},e.b=function(t){return Object(i.a)("https://www.koudaidaxue.com/tools/upload/upImgs",{method:"post",data:[t],noVersion:!0})};var i=n("4nIO")},l4kD:function(t,e){},liLe:function(t,e,n){t.exports={default:n("oAx8"),__esModule:!0}},m5p0:function(t,e,n){n("IHur"),t.exports=n("/KQr").Object.keys},oAx8:function(t,e,n){n("Sg+2");var i=n("/KQr").Object;t.exports=function(t,e,n){return i.defineProperty(t,e,n)}},op0e:function(t,e,n){var i=n("R4LY")("meta"),r=n("yLZD"),a=n("ndDS"),o=n("0hE2").f,s=0,c=Object.isExtensible||function(){return!0},u=!n("D86D")(function(){return c(Object.preventExtensions({}))}),l=function(t){o(t,i,{value:{i:"O"+ ++s,w:{}}})},f=t.exports={KEY:i,NEED:!1,fastKey:function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,i)){if(!c(t))return"F";if(!e)return"E";l(t)}return t[i].i},getWeak:function(t,e){if(!a(t,i)){if(!c(t))return!0;if(!e)return!1;l(t)}return t[i].w},onFreeze:function(t){return u&&f.NEED&&c(t)&&!a(t,i)&&l(t),t}}},tUmU:function(t,e,n){"use strict";var i={props:{qrcode:String},data:function(){return{uid:""}},mounted:function(){this.uid=this.$store.state.user.userInfo.uid}},r={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"contact-xxd"},[n("div",{staticClass:"xxh__hd"},[n("p",{staticClass:"xxh__title"},[t._t("title",[t._v("长按以下二维码")])],2),t._v(" "),n("p",{staticClass:"xxh__title"},[t._t("subtitle",[t._v("联系小象导进行申诉")])],2)]),t._v(" "),n("div",{staticClass:"xxh__qrcode-container"},[n("img",{staticClass:"xxh__qrcode",attrs:{src:t.qrcode||"http://oss.pocketuniversity.cn/media/2018-03-23/5ab465c21a8ca.jpg",alt:""}})]),t._v(" "),n("div",{staticClass:"xxh__uid"},[t._v("\n        请记住您的UID: "+t._s(t.uid)+"\n    ")]),t._v(" "),n("div",{staticClass:"xxh__tip"},[t._t("uidtip",[t._v("可能会在申诉过程中用到")])],2)])},staticRenderFns:[]};var a=n("C7Lr")(i,r,!1,function(t){n("P8jM")},"data-v-130c2ac7",null);e.a=a.exports},tkAn:function(t,e,n){var i=n("2Dza"),r=n("RxNJ").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},uCbw:function(t,e,n){var i=n("H5bT"),r=n("SQZr"),a=n("n1iq");t.exports=function(t){var e=i(t),n=r.f;if(n)for(var o,s=n(t),c=a.f,u=0;s.length>u;)c.call(t,o=s[u++])&&e.push(o);return e}},vm2g:function(t,e){},vzB3:function(t,e,n){"use strict";(function(t){var e=n("IYkF"),i=n.n(e),r=n("hRKE"),a=n.n(r);!function(e,i){if("object"==("undefined"==typeof exports?"undefined":a()(exports))&&"object"==a()(t))t.exports=i();else if("function"==typeof define&&n("Ycmu"))define([],i);else{var r=i();for(var o in r)("object"==("undefined"==typeof exports?"undefined":a()(exports))?exports:e)[o]=r[o]}}(this,function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return t[i].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){n(6),n(7),t.exports=n(8)},function(t,e,n){(function(e){!function(n){function i(t,e){return function(){t.apply(e,arguments)}}function r(t){if("object"!=a()(this))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,i(s,this),i(c,this))}function o(t){var e=this;return null===this._state?void this._deferreds.push(t):void f(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null!==n){var i;try{i=n(e._value)}catch(e){return void t.reject(e)}t.resolve(i)}else(e._state?t.resolve:t.reject)(e._value)})}function s(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==(void 0===t?"undefined":a()(t))||"function"==typeof t)){var e=t.then;if("function"==typeof e)return void l(i(e,t),i(s,this),i(c,this))}this._state=!0,this._value=t,u.call(this)}catch(t){c.call(this,t)}}function c(t){this._state=!1,this._value=t,u.call(this)}function u(){for(var t=0,e=this._deferreds.length;e>t;t++)o.call(this,this._deferreds[t]);this._deferreds=null}function l(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(t){if(i)return;i=!0,n(t)}}var f="function"==typeof e&&e||function(t){setTimeout(t,1)},d=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=this;return new r(function(i,r){o.call(n,new function(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}(t,e,i,r))})},r.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&d(arguments[0])?arguments[0]:arguments);return new r(function(e,n){function i(o,s){try{if(s&&("object"==(void 0===s?"undefined":a()(s))||"function"==typeof s)){var c=s.then;if("function"==typeof c)return void c.call(s,function(t){i(o,t)},n)}t[o]=s,0==--r&&e(t)}catch(t){n(t)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},r.resolve=function(t){return t&&"object"==(void 0===t?"undefined":a()(t))&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var i=0,r=t.length;r>i;i++)t[i].then(e,n)})},r._setImmediateFn=function(t){f=t},r.prototype.always=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){throw n})})},void 0!==t&&t.exports?t.exports=r:n.Promise||(n.Promise=r)}(this)}).call(e,n(2).setImmediate)},function(t,e,n){(function(t,i){function r(t,e){this._id=t,this._clearFn=e}var a=n(3).nextTick,o=Function.prototype.apply,s=Array.prototype.slice,c={},u=0;e.setTimeout=function(){return new r(o.call(setTimeout,window,arguments),clearTimeout)},e.setInterval=function(){return new r(o.call(setInterval,window,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t.close()},r.prototype.unref=r.prototype.ref=function(){},r.prototype.close=function(){this._clearFn.call(window,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},e.setImmediate="function"==typeof t?t:function(t){var n=u++,i=!(arguments.length<2)&&s.call(arguments,1);return c[n]=!0,a(function(){c[n]&&(i?t.apply(null,i):t.call(null),e.clearImmediate(n))}),n},e.clearImmediate="function"==typeof i?i:function(t){delete c[t]}}).call(e,n(2).setImmediate,n(2).clearImmediate)},function(t,e){function n(){u=!1,o.length?c=o.concat(c):l=-1,c.length&&i()}function i(){if(!u){var t=setTimeout(n);u=!0;for(var e=c.length;e;){for(o=c,c=[];++l<e;)o&&o[l].run();l=-1,e=c.length}o=null,u=!1,clearTimeout(t)}}function r(t,e){this.fun=t,this.array=e}function a(){}var o,s=t.exports={},c=[],u=!1,l=-1;s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new r(t,e)),1!==c.length||u||setTimeout(i,0)},r.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=a,s.addListener=a,s.once=a,s.off=a,s.removeListener=a,s.removeAllListeners=a,s.emit=a,s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,e){var n=function(){try{return new Blob,!0}catch(t){return!1}}()?window.Blob:function(t,e){var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MSBlobBuilder||window.MozBlobBuilder);return t.forEach(function(t){n.append(t)}),n.getBlob(e?e.type:void 0)},r=function(){function t(){var t=this,i=[],r=Array(21).join("-")+(+new Date*(1e16*Math.random())).toString(36),a=XMLHttpRequest.prototype.send;this.getParts=function(){return i.toString()},this.append=function(t,e,n){i.push("--"+r+'\r\nContent-Disposition: form-data; name="'+t+'"'),e instanceof Blob?(i.push('; filename="'+(n||"blob")+'"\r\nContent-Type: '+e.type+"\r\n\r\n"),i.push(e)):i.push("\r\n\r\n"+e),i.push("\r\n")},e++,XMLHttpRequest.prototype.send=function(o){var s,c,u=this;o===t?(i.push("--"+r+"--\r\n"),c=new n(i),(s=new FileReader).onload=function(){a.call(u,s.result)},s.onerror=function(t){throw t},s.readAsArrayBuffer(c),this.setRequestHeader("Content-Type","multipart/form-data; boundary="+r),0==--e&&(XMLHttpRequest.prototype.send=a)):a.call(this,o)}}var e=0;return t.prototype=i()(FormData.prototype),t}();t.exports={Blob:n,FormData:~navigator.userAgent.indexOf("Android")&&~navigator.vendor.indexOf("Google")&&!~navigator.userAgent.indexOf("Chrome")&&navigator.userAgent.match(/AppleWebKit\/(\d+)/).pop()<=534||/MQQBrowser/g.test(navigator.userAgent)?r:FormData}},function(t,e,n){var i;(function(){function n(t){return!!t.exifdata}function r(t,e){function n(n){var i=o(n),r=function(t){var e=new DataView(t);if(d&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return d&&console.log("Not a valid JPEG"),!1;for(var n=2,i=t.byteLength,r=function(t,e){return 56===t.getUint8(e)&&66===t.getUint8(e+1)&&73===t.getUint8(e+2)&&77===t.getUint8(e+3)&&4===t.getUint8(e+4)&&4===t.getUint8(e+5)};i>n;){if(r(e,n)){var a=e.getUint8(n+7);a%2!=0&&(a+=1),0===a&&(a=4);var o=n+8+a,c=e.getUint16(n+6+a);return s(t,o,c)}n++}}(n);t.exifdata=i||{},t.iptcdata=r||{},e&&e.call(t)}if(t.src)if(/^data\:/i.test(t.src))n(function(t,e){e=e||t.match(/^data\:([^\;]+)\;base64,/im)[1]||"",t=t.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var n=atob(t),i=n.length,r=new ArrayBuffer(i),a=new Uint8Array(r),o=0;i>o;o++)a[o]=n.charCodeAt(o);return r}(t.src));else if(/^blob\:/i.test(t.src)){(r=new FileReader).onload=function(t){n(t.target.result)},function(t,e){var n=new XMLHttpRequest;n.open("GET",t,!0),n.responseType="blob",n.onload=function(t){(200==this.status||0===this.status)&&e(this.response)},n.send()}(t.src,function(t){r.readAsArrayBuffer(t)})}else{var i=new XMLHttpRequest;i.onload=function(){200==this.status||0===this.status?n(i.response):e(new Error("Could not load image")),i=null},i.open("GET",t.src,!0),i.responseType="arraybuffer",i.send(null)}else if(window.FileReader&&(t instanceof window.Blob||t instanceof window.File)){var r;(r=new FileReader).onload=function(t){d&&console.log("Got file of length "+t.target.result.byteLength),n(t.target.result)},r.readAsArrayBuffer(t)}}function o(t){var e=new DataView(t);if(d&&console.log("Got file of length "+t.byteLength),255!=e.getUint8(0)||216!=e.getUint8(1))return d&&console.log("Not a valid JPEG"),!1;for(var n,i=2,r=t.byteLength;r>i;){if(255!=e.getUint8(i))return d&&console.log("Not a valid marker at offset "+i+", found: "+e.getUint8(i)),!1;if(n=e.getUint8(i+1),d&&console.log(n),225==n)return d&&console.log("Found 0xFFE1 marker"),f(e,i+4,e.getUint16(i+2));i+=2+e.getUint16(i+2)}}function s(t,e,n){for(var i,r,a,o,s=new DataView(t),c={},u=e;e+n>u;)28===s.getUint8(u)&&2===s.getUint8(u+1)&&((o=s.getUint8(u+2))in y&&((a=s.getInt16(u+3))+5,r=y[o],i=l(s,u+5,a),c.hasOwnProperty(r)?c[r]instanceof Array?c[r].push(i):c[r]=[c[r],i]:c[r]=i)),u++;return c}function c(t,e,n,i,r){var a,o,s,c=t.getUint16(n,!r),l={};for(s=0;c>s;s++)a=n+12*s+2,!(o=i[t.getUint16(a,!r)])&&d&&console.log("Unknown tag: "+t.getUint16(a,!r)),l[o]=u(t,a,e,n,r);return l}function u(t,e,n,i,r){var a,o,s,c,u,f,d=t.getUint16(e+2,!r),h=t.getUint32(e+4,!r),p=t.getUint32(e+8,!r)+n;switch(d){case 1:case 7:if(1==h)return t.getUint8(e+8,!r);for(a=h>4?p:e+8,o=[],c=0;h>c;c++)o[c]=t.getUint8(a+c);return o;case 2:return l(t,a=h>4?p:e+8,h-1);case 3:if(1==h)return t.getUint16(e+8,!r);for(a=h>2?p:e+8,o=[],c=0;h>c;c++)o[c]=t.getUint16(a+2*c,!r);return o;case 4:if(1==h)return t.getUint32(e+8,!r);for(o=[],c=0;h>c;c++)o[c]=t.getUint32(p+4*c,!r);return o;case 5:if(1==h)return u=t.getUint32(p,!r),f=t.getUint32(p+4,!r),(s=new Number(u/f)).numerator=u,s.denominator=f,s;for(o=[],c=0;h>c;c++)u=t.getUint32(p+8*c,!r),f=t.getUint32(p+4+8*c,!r),o[c]=new Number(u/f),o[c].numerator=u,o[c].denominator=f;return o;case 9:if(1==h)return t.getInt32(e+8,!r);for(o=[],c=0;h>c;c++)o[c]=t.getInt32(p+4*c,!r);return o;case 10:if(1==h)return t.getInt32(p,!r)/t.getInt32(p+4,!r);for(o=[],c=0;h>c;c++)o[c]=t.getInt32(p+8*c,!r)/t.getInt32(p+4+8*c,!r);return o}}function l(t,e,n){var i,r="";for(i=e;e+n>i;i++)r+=String.fromCharCode(t.getUint8(i));return r}function f(t,e){if("Exif"!=l(t,e,4))return d&&console.log("Not valid EXIF data! "+l(t,e,4)),!1;var n,i,r,a,o,s=e+6;if(18761==t.getUint16(s))n=!1;else{if(19789!=t.getUint16(s))return d&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=t.getUint16(s+2,!n))return d&&console.log("Not valid TIFF data! (no 0x002A)"),!1;var u=t.getUint32(s+4,!n);if(8>u)return d&&console.log("Not valid TIFF data! (First offset less than 8)",t.getUint32(s+4,!n)),!1;if((i=c(t,s,s+u,g,n)).ExifIFDPointer)for(r in a=c(t,s,s+i.ExifIFDPointer,p,n)){switch(r){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[r]=m[r][a[r]];break;case"ExifVersion":case"FlashpixVersion":a[r]=String.fromCharCode(a[r][0],a[r][1],a[r][2],a[r][3]);break;case"ComponentsConfiguration":a[r]=m.Components[a[r][0]]+m.Components[a[r][1]]+m.Components[a[r][2]]+m.Components[a[r][3]]}i[r]=a[r]}if(i.GPSInfoIFDPointer)for(r in o=c(t,s,s+i.GPSInfoIFDPointer,v,n)){switch(r){case"GPSVersionID":o[r]=o[r][0]+"."+o[r][1]+"."+o[r][2]+"."+o[r][3]}i[r]=o[r]}return i}var d=!1,h=function t(e){return e instanceof t?e:this instanceof t?void(this.EXIFwrapped=e):new t(e)};void 0!==t&&t.exports&&(e=t.exports=h),e.EXIF=h;var p=h.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},g=h.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},v=h.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},m=h.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},y={120:"caption",110:"credit",25:"keywords",55:"dateCreated",80:"byline",85:"bylineTitle",122:"captionWriter",105:"headline",116:"copyright",15:"category"};h.getData=function(t,e){return!((t instanceof Image||t instanceof HTMLImageElement)&&!t.complete)&&(n(t)?e&&e.call(t):r(t,e),!0)},h.getTag=function(t,e){return n(t)?t.exifdata[e]:void 0},h.getAllTags=function(t){if(!n(t))return{};var e,i=t.exifdata,r={};for(e in i)i.hasOwnProperty(e)&&(r[e]=i[e]);return r},h.pretty=function(t){if(!n(t))return"";var e,i=t.exifdata,r="";for(e in i)i.hasOwnProperty(e)&&(r+="object"==a()(i[e])?i[e]instanceof Number?e+" : "+i[e]+" ["+i[e].numerator+"/"+i[e].denominator+"]\r\n":e+" : ["+i[e].length+" values]\r\n":e+" : "+i[e]+"\r\n");return r},h.readFromBinaryFile=function(t){return o(t)},void 0===(i=function(){return h}.apply(e,[]))||(t.exports=i)}).call(this)},function(t,e,n){var i;!function(){function n(t,e,n,i){var r=t.naturalWidth,a=t.naturalHeight,o=n.width,s=n.height,c=e.getContext("2d");c.save(),function(t,e,n,i,r){switch(r){case 5:case 6:case 7:case 8:t.width=i,t.height=n;break;default:t.width=n,t.height=i}switch(r){case 2:e.translate(n,0),e.scale(-1,1);break;case 3:e.translate(n,i),e.rotate(Math.PI);break;case 4:e.translate(0,i),e.scale(1,-1);break;case 5:e.rotate(.5*Math.PI),e.scale(1,-1);break;case 6:e.rotate(.5*Math.PI),e.translate(0,-i);break;case 7:e.rotate(.5*Math.PI),e.translate(n,-i),e.scale(-1,1);break;case 8:e.rotate(-.5*Math.PI),e.translate(-n,0)}}(e,c,o,s,n.orientation),function(t){var e=t.naturalWidth;if(e*t.naturalHeight>1048576){var n=document.createElement("canvas");n.width=n.height=1;var i=n.getContext("2d");return i.drawImage(t,1-e,0),0===i.getImageData(0,0,1,1).data[3]}return!1}(t)&&(r/=2,a/=2);var u=1024,l=document.createElement("canvas");l.width=l.height=u;for(var f=l.getContext("2d"),d=i?function(t,e,n){var i=document.createElement("canvas");i.width=1,i.height=n;var r=i.getContext("2d");r.drawImage(t,0,0);for(var a=r.getImageData(0,0,1,n).data,o=0,s=n,c=n;c>o;)0===a[4*(c-1)+3]?s=c:o=c,c=s+o>>1;var u=c/n;return 0===u?1:u}(t,0,a):1,h=Math.ceil(u*o/r),p=Math.ceil(u*s/a/d),g=0,v=0;a>g;){for(var m=0,y=0;r>m;)f.clearRect(0,0,u,u),f.drawImage(t,-m,-g),c.drawImage(l,0,0,u,u,y,v,h,p),m+=u,y+=h;g+=u,v+=p}c.restore(),l=f=null}function r(t){if(window.Blob&&t instanceof Blob){var e=new Image,n=window.URL&&window.URL.createObjectURL?window.URL:window.webkitURL&&window.webkitURL.createObjectURL?window.webkitURL:null;if(!n)throw Error("No createObjectURL function found to create blob url");e.src=n.createObjectURL(t),this.blob=t,t=e}if(!t.naturalWidth&&!t.naturalHeight){var i=this;t.onload=function(){var t=i.imageLoadListeners;if(t){i.imageLoadListeners=null;for(var e=0,n=t.length;n>e;e++)t[e]()}},this.imageLoadListeners=[]}this.srcImage=t}r.prototype.render=function(t,e,i){if(this.imageLoadListeners){var r=this;this.imageLoadListeners.push(function(){r.render(t,e,i)})}else{e=e||{};var a=this.srcImage,o=a.src,s=o.length,c=a.naturalWidth,u=a.naturalHeight,l=e.width,f=e.height,d=e.maxWidth,h=e.maxHeight,p=this.blob&&"image/jpeg"===this.blob.type||0===o.indexOf("data:image/jpeg")||o.indexOf(".jpg")===s-4||o.indexOf(".jpeg")===s-5;l&&!f?f=u*l/c<<0:f&&!l?l=c*f/u<<0:(l=c,f=u),d&&l>d&&(f=u*(l=d)/c<<0),h&&f>h&&(l=c*(f=h)/u<<0);var g={width:l,height:f};for(var v in e)g[v]=e[v];var m=t.tagName.toLowerCase();"img"===m?t.src=function(t,e,i){var r=document.createElement("canvas");return n(t,r,e,i),r.toDataURL("image/jpeg",e.quality||.8)}(this.srcImage,g,p):"canvas"===m&&n(this.srcImage,t,g,p),"function"==typeof this.onrender&&this.onrender(t),i&&i()}},void 0===(i=function(){return r}.apply(e,[]))||(t.exports=i)}()},function(t,e){t.exports=function(t){function e(t,e){for(var n=0,i=0,r=new Array,a=1;16>=a;a++){for(var o=1;o<=t[a];o++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=a,i++,n++;n*=2}return r}function n(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(P|=1<<O),n--,0>--O&&(255==P?(i(255),i(0)):i(P),O=7,P=0)}function i(t){k.push(U[t])}function r(t){i(t>>8&255),i(255&t)}function a(){r(65504),r(16),i(74),i(70),i(73),i(70),i(0),i(1),i(1),i(0),r(1),r(1),i(0),i(0)}function o(t,e){r(65472),r(17),i(8),r(e),r(t),i(3),i(1),i(17),i(0),i(2),i(17),i(1),i(3),i(17),i(1)}function s(){r(65499),r(132),i(0);for(var t=0;64>t;t++)i(y[t]);i(1);for(var e=0;64>e;e++)i(w[e])}function c(){r(65476),r(418),i(0);for(var t=0;16>t;t++)i(q[t+1]);for(var e=0;11>=e;e++)i(L[e]);i(16);for(var n=0;16>n;n++)i(R[n+1]);for(var a=0;161>=a;a++)i(E[a]);i(1);for(var o=0;16>o;o++)i(M[o+1]);for(var s=0;11>=s;s++)i(N[s]);i(17);for(var c=0;16>c;c++)i(B[c+1]);for(var u=0;161>=u;u++)i(G[u])}function u(){r(65498),r(12),i(3),i(1),i(0),i(2),i(17),i(3),i(17),i(0),i(63),i(0)}function l(t,e,i,r,a){for(var o,s=a[0],c=a[240],u=function(t,e){var n,i,r,a,o,s,c,u,l,f,d=0;for(l=0;8>l;++l){n=t[d],i=t[d+1],r=t[d+2],a=t[d+3],o=t[d+4],s=t[d+5],c=t[d+6];var h=n+(u=t[d+7]),p=n-u,g=i+c,v=i-c,m=r+s,y=r-s,w=a+o,b=a-o,_=h+w,x=h-w,S=g+m,I=g-m;t[d]=_+S,t[d+4]=_-S;var k=.707106781*(I+x);t[d+2]=x+k,t[d+6]=x-k;var P=.382683433*((_=b+y)-(I=v+p)),O=.5411961*_+P,F=1.306562965*I+P,D=.707106781*(S=y+v),T=p+D,U=p-D;t[d+5]=U+O,t[d+3]=U-O,t[d+1]=T+F,t[d+7]=T-F,d+=8}for(d=0,l=0;8>l;++l){n=t[d],i=t[d+8],r=t[d+16],a=t[d+24],o=t[d+32],s=t[d+40],c=t[d+48];var j=n+(u=t[d+56]),A=n-u,q=i+c,L=i-c,R=r+s,E=r-s,M=a+o,N=a-o,B=j+M,G=j-M,z=q+R,H=q-R;t[d]=B+z,t[d+32]=B-z;var W=.707106781*(H+G);t[d+16]=G+W,t[d+48]=G-W;var X=.382683433*((B=N+E)-(H=L+A)),$=.5411961*B+X,Y=1.306562965*H+X,Q=.707106781*(z=E+L),V=A+Q,K=A-Q;t[d+40]=K+$,t[d+24]=K-$,t[d+8]=V+Y,t[d+56]=V-Y,d++}for(l=0;64>l;++l)f=t[l]*e[l],C[l]=f>0?f+.5|0:f-.5|0;return C}(t,e),l=0;64>l;++l)I[A[l]]=u[l];var f=I[0]-i;i=I[0],0==f?n(r[0]):(n(r[S[o=32767+f]]),n(x[o]));for(var d=63;d>0&&0==I[d];d--);if(0==d)return n(s),i;for(var h,p=1;d>=p;){for(var g=p;0==I[p]&&d>=p;++p);var v=p-g;if(v>=16){h=v>>4;for(var m=1;h>=m;++m)n(c);v&=15}o=32767+I[p],n(a[(v<<4)+S[o]]),n(x[o]),p++}return 63!=d&&n(s),i}function f(t){0>=t&&(t=1),t>100&&(t=100),v!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;64>n;n++){var i=m((e[n]*t+50)/100);1>i?i=1:i>255&&(i=255),y[A[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],a=0;64>a;a++){var o=m((r[a]*t+50)/100);1>o?o=1:o>255&&(o=255),w[A[a]]=o}for(var s=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],c=0,u=0;8>u;u++)for(var l=0;8>l;l++)b[c]=1/(y[A[c]]*s[u]*s[l]*8),_[c]=1/(w[A[c]]*s[u]*s[l]*8),c++}(50>t?Math.floor(5e3/t):Math.floor(200-2*t)),v=t)}var d,h,p,g,v,m=(Math.round,Math.floor),y=new Array(64),w=new Array(64),b=new Array(64),_=new Array(64),x=new Array(65535),S=new Array(65535),C=new Array(64),I=new Array(64),k=[],P=0,O=7,F=new Array(64),D=new Array(64),T=new Array(64),U=new Array(256),j=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],q=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],R=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],E=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],N=[0,1,2,3,4,5,6,7,8,9,10,11],B=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],G=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];this.encode=function(t,e,i){(new Date).getTime(),e&&f(e),k=new Array,P=0,O=7,r(65496),a(),s(),o(t.width,t.height),c(),u();var v=0,m=0,y=0;P=0,O=7,this.encode.displayName="_encode_";for(var w,x,S,C,I,U,A,q,L,R=t.data,E=t.width,M=t.height,N=4*E,B=0;M>B;){for(w=0;N>w;){for(U=I=N*B+w,A=-1,q=0,L=0;64>L;L++)U=I+(q=L>>3)*N+(A=4*(7&L)),B+q>=M&&(U-=N*(B+1+q-M)),w+A>=N&&(U-=w+A-N+4),x=R[U++],S=R[U++],C=R[U++],F[L]=(j[x]+j[S+256>>0]+j[C+512>>0]>>16)-128,D[L]=(j[x+768>>0]+j[S+1024>>0]+j[C+1280>>0]>>16)-128,T[L]=(j[x+1280>>0]+j[S+1536>>0]+j[C+1792>>0]>>16)-128;v=l(F,b,v,d,p),m=l(D,_,m,h,g),y=l(T,_,y,h,g),w+=32}B+=8}if(O>=0){var G=[];G[1]=O+1,G[0]=(1<<O+1)-1,n(G)}if(r(65497),i){for(var z=k.length,H=new Uint8Array(z),W=0;z>W;W++)H[W]=k[W].charCodeAt();return k=[],(new Date).getTime(),H}var X="data:image/jpeg;base64,"+btoa(k.join(""));return k=[],(new Date).getTime(),X},(new Date).getTime(),t||(t=50),function(){for(var t=String.fromCharCode,e=0;256>e;e++)U[e]=t(e)}(),d=e(q,L),h=e(M,N),p=e(R,E),g=e(B,G),function(){for(var t=1,e=2,n=1;15>=n;n++){for(var i=t;e>i;i++)S[32767+i]=n,x[32767+i]=[],x[32767+i][1]=n,x[32767+i][0]=i;for(var r=-(e-1);-t>=r;r++)S[32767+r]=n,x[32767+r]=[],x[32767+r][1]=n,x[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;256>t;t++)j[t]=19595*t,j[t+256>>0]=38470*t,j[t+512>>0]=7471*t+32768,j[t+768>>0]=-11059*t,j[t+1024>>0]=-21709*t,j[t+1280>>0]=32768*t+8421375,j[t+1536>>0]=-27439*t,j[t+1792>>0]=-5329*t}(),f(t),(new Date).getTime()}},function(t,e,n){function i(t,e){var n=this;if(!t)throw new Error("没有收到图片，可能的解决方案：https://github.com/think2011/localResizeIMG/issues/7");for(var i in e=e||{},n.defaults={width:null,height:null,fieldName:"file",quality:.7},n.file=t,e)e.hasOwnProperty(i)&&(n.defaults[i]=e[i]);return this.init()}n.p=function(t){var e=null;return(e=t?[].filter.call(document.scripts,function(e){return-1!==e.src.indexOf(t)})[0]:document.scripts[document.scripts.length-1])?e.src.substr(0,e.src.lastIndexOf("/")):null}("lrz")+"/",window.URL=window.URL||window.webkitURL;var r=n(1),o=n(4),s=n(5),c=function(t){var e=/OS (\d)_.* like Mac OS X/g.exec(t),n=/Android (\d.*?);/g.exec(t)||/Android\/(\d.*?) /g.exec(t);return{oldIOS:!!e&&+e.pop()<8,oldAndroid:!!n&&+n.pop().substr(0,3)<4.5,iOS:/\(i[^;]+;( U;)? CPU.+Mac OS X/.test(t),android:/Android/g.test(t),mQQBrowser:/MQQBrowser/g.test(t)}}(navigator.userAgent);i.prototype.init=function(){var t=this,e=t.file,n="string"==typeof e,i=/^data:/.test(e),s=new Image,c=document.createElement("canvas"),u=n?e:URL.createObjectURL(e);if(t.img=s,t.blob=u,t.canvas=c,t.fileName=n?i?"base64.jpg":e.split("/").pop():e.name,!document.createElement("canvas").getContext)throw new Error("浏览器不支持canvas");return new r(function(n,r){s.onerror=function(){var t=new Error("加载图片文件失败");throw r(t),t},s.onload=function(){t._getBase64().then(function(t){if(t.length<10){var e=new Error("生成base64失败");throw r(e),e}return t}).then(function(i){var r=null;for(var s in"object"==a()(t.file)&&i.length>t.file.size?(r=new FormData,e=t.file):(r=new o.FormData,e=function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var n=t.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(e.length),r=0;r<e.length;r++)i[r]=e.charCodeAt(r);return new o.Blob([i.buffer],{type:n})}(i)),r.append(t.defaults.fieldName,e,t.fileName.replace(/\..+/g,".jpg")),n({formData:r,fileLen:+e.size,base64:i,base64Len:i.length,origin:t.file,file:e}),t)t.hasOwnProperty(s)&&(t[s]=null);URL.revokeObjectURL(t.blob)})},!i&&(s.crossOrigin="*"),s.src=u})},i.prototype._getBase64=function(){var t=this,e=t.img,n=t.file,i=t.canvas;return new r(function(r){try{s.getData("object"==(void 0===n?"undefined":a()(n))?n:e,function(){t.orientation=s.getTag(this,"Orientation"),t.resize=t._getResize(),t.ctx=i.getContext("2d"),i.width=t.resize.width,i.height=t.resize.height,t.ctx.fillStyle="#fff",t.ctx.fillRect(0,0,i.width,i.height),c.oldIOS?t._createBase64ForOldIOS().then(r):t._createBase64().then(r)})}catch(t){throw new Error(t)}})},i.prototype._createBase64ForOldIOS=function(){var t=this,e=t.img,i=t.canvas,a=t.defaults,o=t.orientation;return new r(function(t){var r;r=[n(6)],function(n){var r=new n(e);"5678".indexOf(o)>-1?r.render(i,{width:i.height,height:i.width,orientation:o}):r.render(i,{width:i.width,height:i.height,orientation:o}),t(i.toDataURL("image/jpeg",a.quality))}.apply(null,r)})},i.prototype._createBase64=function(){var t=this,e=t.resize,i=t.img,a=t.canvas,o=t.ctx,s=t.defaults;switch(t.orientation){case 3:o.rotate(180*Math.PI/180),o.drawImage(i,-e.width,-e.height,e.width,e.height);break;case 6:o.rotate(90*Math.PI/180),o.drawImage(i,0,-e.width,e.height,e.width);break;case 8:o.rotate(270*Math.PI/180),o.drawImage(i,-e.height,0,e.height,e.width);break;case 2:o.translate(e.width,0),o.scale(-1,1),o.drawImage(i,0,0,e.width,e.height);break;case 4:o.translate(e.width,0),o.scale(-1,1),o.rotate(180*Math.PI/180),o.drawImage(i,-e.width,-e.height,e.width,e.height);break;case 5:o.translate(e.width,0),o.scale(-1,1),o.rotate(90*Math.PI/180),o.drawImage(i,0,-e.width,e.height,e.width);break;case 7:o.translate(e.width,0),o.scale(-1,1),o.rotate(270*Math.PI/180),o.drawImage(i,-e.height,0,e.height,e.width);break;default:o.drawImage(i,0,0,e.width,e.height)}return new r(function(t){var e;c.oldAndroid||c.mQQBrowser||!navigator.userAgent?(e=[n(7)],function(e){var n=new e,i=o.getImageData(0,0,a.width,a.height);t(n.encode(i,100*s.quality))}.apply(null,e)):t(a.toDataURL("image/jpeg",s.quality))})},i.prototype._getResize=function(){var t=this,e=t.img,n=t.defaults,i=n.width,r=n.height,a=t.orientation,o={width:e.width,height:e.height};if("5678".indexOf(a)>-1&&(o.width=e.height,o.height=e.width),o.width<i||o.height<r)return o;var s=o.width/o.height;for(i&&r?s>=i/r?o.width>i&&(o.width=i,o.height=Math.ceil(i/s)):o.height>r&&(o.height=r,o.width=Math.ceil(r*s)):i?i<o.width&&(o.width=i,o.height=Math.ceil(i/s)):r&&r<o.height&&(o.width=Math.ceil(r*s),o.height=r);o.width>=3264||o.height>=2448;)o.width*=.8,o.height*=.8;return o},window.lrz=function(t,e){return new i(t,e)},window.lrz.version="4.9.40",t.exports=window.lrz}])})}).call(e,n("VC+f")(t))},z2yV:function(t,e,n){"use strict";var i=n("OHEZ"),r={render:function(){var t=this.$createElement;return(this._self._c||t)("div",{class:["aliicon","icon-"+this.type],style:{"font-size":this.size+"px",color:this.color}})},staticRenderFns:[]};var a=function(t){n("jRRQ")},o=n("C7Lr")(i.a,r,!1,a,"data-v-622b966e",null);e.a=o.exports}});